!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("@aspnet/signalr"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","@aspnet/signalr","react-dom"],e):"object"==typeof exports?exports.dotnetify=e(require("react"),require("@aspnet/signalr"),require("react-dom")):t.dotnetify=e(t.React,t.signalR,t.ReactDOM)}(window,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=30)}([function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fetch=e.createEventEmitter=void 0;var r=function(){function t(){}return t.prototype.trim=function(t){if("string"!=typeof t)return"";for(;t.indexOf("/",t.length-1)>=0;)t=t.substr(0,t.length-1);for(;0==t.indexOf("/");)t=t.substr(1,t.length-1);return t},t.prototype.equal=function(t,e){return null!=t&&null!=e&&t.toLowerCase()==e.toLowerCase()},t.prototype.startsWith=function(t,e){return t.toLowerCase().slice(0,e.length)==e.toLowerCase()},t.prototype.endsWith=function(t,e){return""==e||t.toLowerCase().slice(-e.length)==e.toLowerCase()},t.prototype.dispatchEvent=function(t){if("function"==typeof Event)dispatchEvent(new Event(t));else{var e=document.createEvent("CustomEvent");e.initEvent(t,!0,!0),dispatchEvent(e)}},t.prototype.grep=function(t,e){return Array.isArray(t)?t.filter(e):[]},t}();e.createEventEmitter=function(){var t=[];return{emit:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=!1;return t.forEach(function(t){r=t.apply(void 0,e)||r}),r},subscribe:function(e){return!t.includes(e)&&t.push(e),function(){return t=t.filter(function(t){return t!==e})}}}},e.fetch=function(t,e,n,r){return new Promise(function(o,i){var u=new XMLHttpRequest;u.open(t,e,!0),"function"==typeof r&&r(u),u.onload=function(){if(u.status>=200&&u.status<400){var t=u.responseText;o(t)}else i(u)},u.onerror=function(){i(u)},u.send(n)})},e.default=new r},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.DotnetifyReact=void 0;var r=n(16),o=n(5),i=(window||t||{}).dotnetify||r.default,u=function(){function t(){this.version="3.0.0",this.viewModels={},this.plugins={},this.controller=i,this._hubs=[]}return t.prototype.init=function(t){var e=this,n=function(){t.isHubStarted||Object.keys(e.viewModels).filter(function(n){return e.viewModels[n].$hub===t}).forEach(function(t){return e.viewModels[t].$requested=!1}),i.startHub(t)};this._hubs.some(function(e){return e===t})||(t.responseEvent.subscribe(function(t,n){return e._responseVM(t,n)}),t.connectedEvent.subscribe(function(){return Object.keys(e.viewModels).filter(function(n){return e.viewModels[n].$hub===t&&!e.viewModels[n].$requested}).forEach(function(t){return e.viewModels[t].$request()})}),t.reconnectedEvent.subscribe(n),"local"!==t.mode&&this._hubs.push(t)),n()},t.prototype.connect=function(t,e,n){var r=i.react;r.viewModels.hasOwnProperty(t)&&(console.error("Component is attempting to connect to an already active '"+t+"'.  If it's from a dismounted component, you must add vm.$destroy to componentWillUnmount()."),r.viewModels[t].$destroy());var u={get props(){return e.props},get state(){return e.state},setState:function(t){e.setState(t)}},s=i.selectHub({vmId:t,options:n,hub:null});return r.viewModels[t]=new o.default(s.vmId,u,s.options,r,s.hub),s.hub&&r.init(s.hub),r.viewModels[t]},t.prototype.getViewModels=function(){var t=i.react;return Object.keys(t.viewModels).map(function(e){return t.viewModels[e]})},t.prototype._responseVM=function(t,e){var n=i.react;if(n.viewModels.hasOwnProperty(t)){var r=n.viewModels[t];return i.checkServerSideException(t,e,r.$exceptionHandler),r.$update(e),!0}return!1},t}();e.DotnetifyReact=u,i.react=new u,i.addVMAccessor(i.react.getViewModels),e.default=i}).call(this,n(0))},function(t,e,n){"use strict";(function(t,r){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=i||t||{},u=n(13),s=u.extend(function(t){return t===i||t.document?{0:t,on:function(t,e){i.addEventListener(t,e)},bind:function(t,e){i.addEventListener(t,e,!1)},unbind:function(t,e){i.removeEventListener(t,e,!1)}}:("string"!=typeof t&&(t.events=t.events||{}),{0:t,bind:function(e,n){var r=t.events[e]||[];r.push(n),t.events[e]=r},unbind:function(e,n){var r=t.events[e]||[];if(n){var o=r.indexOf(n);-1!==o&&r.splice(o,1)}else r=[];t.events[e]=r},triggerHandler:function(e,n){var r=t.events[e]||[],o=[{type:e}];Array.isArray(n)?n.forEach(function(t){o.push(t)}):n&&o.push(n),r.forEach(function(t){t.apply(this,o)})},load:function(e,n,r){var o=new i.XMLHttpRequest;return o.open("GET",e,!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=o.responseText;document.querySelector(t).innerHTML=e,r.call(document.querySelector(t))}},o.send(),{abort:function(t){return o.abort(t)}}}})},u,{support:{cors:!0},trim:function(t){return"string"==typeof t?t.trim():t},inArray:function(t,e){return-1!==t.indexOf(e)},makeArray:function(t){return[].slice.call(t,0)},merge:function(t,e){return Array.prototype.push.apply(t,e),t},isEmptyObject:function(t){return!t||0===Object.keys(t).length},ajax:function(t){var e=new i.XMLHttpRequest;return e.onreadystatechange=function(){if(4===e.readyState)if(200!==e.status||e._hasError)t.error&&t.error(e);else try{t.success&&t.success(JSON.parse(e.responseText))}catch(n){t.success&&t.success(e.responseText)}},e.open(t.type,t.url),e.setRequestHeader("content-type",t.contentType),e.send(t.data.data&&"data="+t.data.data),{abort:function(t){return e.abort(t)}}},getScript:function(t,e){var n=!1,r=u.Deferred(),o=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.src=t,i.onload=i.onreadystatechange=function(){n||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n=!0,i.onload=i.onreadystatechange=null,o.removeChild(i),"function"==typeof e&&e(),r.resolve())},o.appendChild(i),r}});void 0!==i&&(i.jQuery=i.jQuery||s),"object"===o(e)&&"object"===o(r)&&(r.exports=s)}).call(this,n(0),n(14)(t))},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=function(){function t(t,e,n,o,i){var u=this;this.onRouteEnter=function(){return!0},this.$vmId=t,this.$component=e,this.$options=n||{},this.$vmArg=n&&n.vmArg,this.$headers=n&&n.headers,this.$exceptionHandler=n&&n.exceptionHandler,this.$requested=!1,this.$loaded=!1,this.$itemKey={},this.$dotnetify=o,this.$hub=i;var s=n&&n.getState,a=n&&n.setState;s="function"==typeof s?s:function(){return e.state},a="function"==typeof a?a:function(t){return e.setState(t)},this.State=function(t){return void 0===t?s():a(t)},this.Props=function(t){return u.$component.props&&u.$component.props[t]};var c=this.Props("vmArg");c&&(this.$vmArg=r.extend(this.$vmArg,c)),this.$getPlugins().map(function(t){return"function"==typeof t.$inject?t.$inject(u):null})}return t.prototype.$destroy=function(){var t=this;if(this.$getPlugins().map(function(e){return"function"==typeof e.$destroy?e.$destroy.apply(t):null}),this.$hub.isConnected)try{this.$hub.disposeVM(this.$vmId)}catch(t){this.$dotnetify.controller.handleConnectionStateChanged("error",t,this.$hub)}delete this.$dotnetify.viewModels[this.$vmId]},t.prototype.$dispatch=function(t){if(this.$hub&&this.$hub.isConnected){var e=this.$dotnetify.controller;try{this.$hub.updateVM(this.$vmId,t),e.debug&&(console.log("["+this.$vmId+"] sent> "),console.log(t),e.debugFn&&e.debugFn(this.$vmId,"sent",t))}catch(t){e.handleConnectionStateChanged("error",t,this.$hub)}}},t.prototype.$dispatchListState=function(t){var e=this,n=function(n){var o=r.$itemKey[n];if(!o)return console.error("["+r.$vmId+"] missing item key for '"+n+"'; decorate '"+n+"' with an [ItemKey] attribute."),{value:void 0};var i=t[n];if(!i[o])return console.error("["+r.$vmId+"] couldn't dispatch data from '"+n+"' due to missing property '"+o+"'."),console.error(i),{value:void 0};Object.keys(i).forEach(function(t){if(t!=o){var r={};r[n+".$"+i[o]+"."+t]=i[t],e.$dispatch(r)}}),r.$updateList(n,i)},r=this;for(var o in t){var i=n(o);if("object"==typeof i)return i.value}},t.prototype.$getPlugins=function(){var t=this;return Object.keys(this.$dotnetify.plugins).map(function(e){return t.$dotnetify.plugins[e]})},t.prototype.$preProcess=function(t){var e=this;for(var n in t){if(null==(r=/(.*)_add/.exec(n))){if(null==(r=/(.*)_update/.exec(n))){if(null==(r=/(.*)_remove/.exec(n))){var r;if(null==(r=/(.*)_itemKey/.exec(n)));else{var o={};o[u=r[1]]=t[n],e.$setItemKey(o),delete t[n]}}else{u=r[1];if(Array.isArray(this.State()[u])){var i=this.$itemKey[u];null!=i?Array.isArray(t[n])?e.$removeList(u,function(e){return t[n].some(function(t){return e[i]==t})}):e.$removeList(u,function(e){return e[i]==t[n]}):console.error("["+this.$vmId+"] missing item key for '"+u+"'; decorate '"+u+"' with an [ItemKey] attribute.")}else console.error("["+this.$vmId+"] '"+u+"' is not found or not an array.");delete t[n]}}else{var u=r[1];Array.isArray(this.State()[u])?e.$updateList(u,t[n]):console.error("["+this.$vmId+"] '"+u+"' is not found or not an array."),delete t[n]}}else{var u=r[1];Array.isArray(this.State()[u])?e.$addList(u,t[n]):console.error("unable to resolve "+n),delete t[n]}}},t.prototype.$request=function(){this.$hub.isConnected&&this.$hub.requestVM(this.$vmId,{$vmArg:this.$vmArg,$headers:this.$headers}),this.$requested=!0},t.prototype.$update=function(t){var e=this.$dotnetify.controller;e.debug&&(console.log("["+this.$vmId+"] received> "),console.log(JSON.parse(t)),e.debugFn&&e.debugFn(this.$vmId,"received",JSON.parse(t)));var n=JSON.parse(t);this.$preProcess(n);var o=this.State();o=r.extend({},o,n),this.State(o),this.$loaded?this.$onUpdate(n):this.$onLoad()},t.prototype.$onLoad=function(){var t=this;this.$getPlugins().map(function(e){return"function"==typeof e.$ready?e.$ready.apply(t):null}),this.$loaded=!0},t.prototype.$onUpdate=function(t){var e=this;this.$getPlugins().map(function(n){return"function"==typeof n.$update?n.$update.apply(e,[t]):null})},t.prototype.$setItemKey=function(t){Object.assign(this.$itemKey,t)},t.prototype.$addList=function(t,e){var n=this,r=this.State()[t];if(!Array.isArray(e)||Array.isArray(r[0]||[])){var o=this.$itemKey[t];if(null!=o){if(!e.hasOwnProperty(o))return void console.error("["+this.$vmId+"] couldn't add item to '"+t+"' due to missing property '"+o+"'.");if(this.State()[t].filter(function(t){return t[o]==e[o]}).length>0)return void console.error("["+this.$vmId+"] couldn't add item to '"+t+"' because the key already exists.")}r.push(e);var i={};i[t]=r,this.State(i)}else e.forEach(function(e){return n.$addList(t,e)})},t.prototype.$removeList=function(t,e){var n={};n[t]=this.State()[t].filter(function(t){return!e(t)}),this.State(n)},t.prototype.$updateList=function(t,e){var n=this,o=this.State()[t];if(!Array.isArray(e)||Array.isArray(o[0]||[])){var i=this.$itemKey[t];if(null!=i){if(!e.hasOwnProperty(i))return void console.error("["+this.$vmId+"] couldn't update item to '"+t+"' due to missing property '"+i+"'.");var u={};u[t]=o.map(function(t){return t[i]==e[i]?r.extend(t,e):t}),this.State(u)}else console.error("["+this.$vmId+"] missing item key for '"+t+"'; add '"+t+"_itemKey' property to the view model.")}else e.forEach(function(e){return n.$updateList(t,e)})},t}();e.default=o},function(t,e,n){"use strict";(function(t){var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getSsrState=void 0;var o=n(2),i=n(5),u=n(3),s=window||t||{},a="__dotnetify_ssr_states__",c="__dotnetify_ssr__";function l(t){var e=s[a];return e&&e.hasOwnProperty(t)&&e[t]}e.getSsrState=l,e.default=function(){o.default.ssrEnabled=!0;var t=o.default.react.connect;o.default.react.connect=function(e,n,s){var a=l(e);if(a)try{n.state=a}catch(t){}if(o.default.ssr){a||console.error("Could not find ssr state for "+e+".");var c=o.default.react,f=a,d=r(r({},s),{getState:function(){return f},setState:function(t){return f=u.extend(f,t)}}),p=c.viewModels[e]=new i.default(e,n,d,c,{});return setTimeout(function(){return p.$update(JSON.stringify(f))}),p}return t(e,n,s)};var e=o.default.react.useConnect;o.default.react.useConnect=function(t,n,r){var i=l(t);if(i&&(n.state?n.state=i:n=i),o.default.ssr){i||console.error("Could not find ssr state for "+t+".");var u={get state(){return i}};return{vm:o.default.react.connect(t,u,r),state:i}}return e(t,n,r)},o.default.react.router.ssr=function(t,e,n,r){o.default.ssr=!0,o.default.react.router.urlPath=e;var i=document.createElement("script"),u=document.getElementsByTagName("head")[0];i.type="text/javascript",i.text="window['"+a+"'] = "+n+";",u?u.insertBefore(i,u.firstChild):console.error("router> document head tag is required for server-side render.");var c=!1,l=function(){return t(null,"<!DOCTYPE html>"+document.documentElement.outerHTML)},f=r?setTimeout(function(){return!c&&l()},r):0,d=o.default.react.router.routedEvent.subscribe(function(){c=!0,0!=f&&clearTimeout(f),setTimeout(function(){return l()},100),d()});s[a]=JSON.parse(n)},o.default.react.router.getSsrState=l,"function"==typeof s[c]&&s[c](o.default.react.router.ssr)},o.default.react.router.ssr=function(){return console.error("To run server-side render, call enableSsr().")}}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWebApiHub=e.DotNetifyHubWebApi=void 0;var r=n(1),o=function(){function t(t,e){this.url="",this.mode="webapi",this.debug=!1,this.isConnected=!1,this.isHubStarted=!1,this.responseEvent=r.createEventEmitter(),this.reconnectedEvent=r.createEventEmitter(),this.connectedEvent=r.createEventEmitter(),this.connectionFailedEvent=r.createEventEmitter(),this.reconnectDelay=[],this._vmArgs={},this.url=t||"",this.onRequest=e}return t.create=function(e,n){return new t(e,n)},t.prototype.init=function(){},t.prototype.stateChanged=function(){},t.prototype.startHub=function(){this.isConnected=!0,this.isHubStarted=!0,this.connectedEvent.emit()},t.prototype.requestVM=function(t,e){var n=this,o=e||{},i=o.$vmArg?"?vmarg="+JSON.stringify(o.$vmArg):"",u=o.$headers||{};this._vmArgs[t]=o;var s=this.url+"/api/dotnetify/vm/"+t+i;r.fetch("GET",s,null,function(t){Object.keys(u).forEach(function(e){return t.setRequestHeader(e,u[e])}),"function"==typeof n.onRequest&&n.onRequest(s,t)}).then(function(e){n.responseEvent.emit(t,e)}).catch(function(e){return console.error("["+t+"] Request failed",e)})},t.prototype.updateVM=function(t,e){var n=this,o=this._vmArgs[t]||{},i=o.$vmArg?"?vmarg="+JSON.stringify(o.$vmArg):"",u=o.$headers||{},s="object"==typeof e?JSON.stringify(e):e,a=this.url+"/api/dotnetify/vm/"+t+i;r.fetch("POST",a,s,function(t){t.setRequestHeader("Content-Type","application/json"),Object.keys(u).forEach(function(e){return t.setRequestHeader(e,u[e])}),"function"==typeof n.onRequest&&n.onRequest(a,t,s)}).then(function(e){n.responseEvent.emit(t,e)}).catch(function(e){return console.error("["+t+"] Update failed",e)})},t.prototype.disposeVM=function(t){delete this._vmArgs[t]},t}();e.DotNetifyHubWebApi=o;var i=o.create;e.createWebApiHub=i,e.default=o.create()},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.hasLocalVM=e.DotNetifyHubLocal=void 0;var r=n(1),o=window||t||{},i=function(t){return t&&t.replace(/\./g,"_")};e.hasLocalVM=function(t){var e=i(t),n=o[e];return"object"==typeof n&&"function"==typeof n.onConnect};var u=function(){function t(){this.url=null,this.mode="local",this.debug=!1,this.isConnected=!1,this.isHubStarted=!1,this.responseEvent=r.createEventEmitter(),this.reconnectedEvent=r.createEventEmitter(),this.connectedEvent=r.createEventEmitter(),this.connectionFailedEvent=r.createEventEmitter(),this.reconnectDelay=[]}return t.prototype.init=function(){},t.prototype.stateChanged=function(){},t.prototype.startHub=function(){this.isConnected=!0,this.isHubStarted=!0,this.connectedEvent.emit()},t.prototype.requestVM=function(t,e){var n=this,r=i(t),u=o[r];"object"==typeof u&&"function"==typeof u.onConnect&&(this.debug&&console.log("["+t+"] *** local mode ***"),u.$pushUpdate=function(e){"object"==typeof e&&(e=JSON.stringify(e)),setTimeout(function(){return n.responseEvent.emit(t,e)})},u.$pushUpdate(u.onConnect(e)||{}))},t.prototype.updateVM=function(t,e){var n=this,r=i(t),u=o[r];if("object"==typeof u&&"function"==typeof u.onDispatch){var s=u.onDispatch(e);s&&("object"==typeof s&&(s=JSON.stringify(s)),setTimeout(function(){return n.responseEvent.emit(t,s)}))}},t.prototype.disposeVM=function(t){var e=i(t),n=o[e];"object"==typeof n&&"function"==typeof n.onDestroy&&n.onDestroy(t)},t}();e.DotNetifyHubLocal=u,e.default=new u}).call(this,n(0))},function(t,n){t.exports=e},function(t,e){var n=t.exports={type:function(t){return null==t?String(t):o[r.call(t)]||"object"},isArray:function(t){return"array"===n.type(t)},isFunction:i,isPlainObject:function(t){if(!t||"object"!==n.type(t))return!1;return!0},each:function(t,e,n){var r,o=0,u=t.length,s=void 0===u||i(t);if(n)if(s){for(r in t)if(!1===e.apply(t[r],n))break}else for(;o<u&&!1!==e.apply(t[o++],n););else if(s){for(r in t)if(!1===e.call(t[r],r,t[r]))break}else for(;o<u&&!1!==e.call(t[o],o,t[o++]););return t},extend:function(){var t,e,r,o,i,u,s=arguments[0]||{},a=1,c=arguments.length,l=!1;"boolean"==typeof s&&(l=s,s=arguments[1]||{},a=2);"object"==typeof s||n.isFunction(s)||(s={});c===a&&(s=this,--a);for(;a<c;a++)if(null!=(t=arguments[a]))for(e in t)r=s[e],o=t[e],s!==o&&(l&&o&&(n.isPlainObject(o)||(i=n.isArray(o)))?(i?(i=!1,u=r&&n.isArray(r)?r:[]):u=r&&n.isPlainObject(r)?r:{},s[e]=n.extend(l,u,o)):void 0!==o&&(s[e]=o));return s},noop:function(){}},r=Object.prototype.toString,o={};function i(t){return"function"===n.type(t)}"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){o["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){var r=t.exports=n(10),o=/\s+/,i={};r.Callbacks=function(t){var e,n,u,s,a,c,l=[],f=!(t="string"==typeof t?i[t]||function(t){var e=i[t]={};return r.each(t.split(o),function(t,n){e[n]=!0}),e}(t):r.extend({},t)).once&&[],d=function(r){for(e=t.memory&&r,n=!0,c=s||0,s=0,a=l.length,u=!0;l&&c<a;c++)if(!1===l[c].apply(r[0],r[1])&&t.stopOnFalse){e=!1;break}u=!1,l&&(f?f.length&&d(f.shift()):e?l=[]:p.disable())},p={add:function(){if(l){var n=l.length;!function e(n){r.each(n,function(n,o){var i=r.type(o);"function"===i?t.unique&&p.has(o)||l.push(o):o&&o.length&&"string"!==i&&e(o)})}(arguments),u?a=l.length:e&&(s=n,d(e))}return this},remove:function(){return l&&r.each(arguments,function(t,e){for(var n;(n=r.inArray(e,l,n))>-1;)l.splice(n,1),u&&(n<=a&&a--,n<=c&&c--)}),this},has:function(t){return r.inArray(t,l)>-1},empty:function(){return l=[],this},disable:function(){return l=f=e=void 0,this},disabled:function(){return!l},lock:function(){return f=void 0,e||p.disable(),this},locked:function(){return!f},fireWith:function(t,e){return e=[t,(e=e||[]).slice?e.slice():e],!l||n&&!f||(u?f.push(e):d(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p}},function(t,e,n){
/*!
* jquery-deferred
* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
* MIT Licensed
*/
var r=t.exports=n(11),o=Array.prototype.slice;r.extend({Deferred:function(t){var e=[["resolve","done",r.Callbacks("once memory"),"resolved"],["reject","fail",r.Callbacks("once memory"),"rejected"],["notify","progress",r.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return r.Deferred(function(n){r.each(e,function(e,o){var u=o[0],s=t[e];i[o[1]](r.isFunction(s)?function(){var t=s.apply(this,arguments);t&&r.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[u+"With"](this===i?n:this,[t])}:n[u])}),t=null}).promise()},promise:function(t){return null!=t?r.extend(t,o):o}},i={};return o.pipe=o.then,r.each(e,function(t,r){var u=r[2],s=r[3];o[r[1]]=u.add,s&&u.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[r[0]]=u.fire,i[r[0]+"With"]=u.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,i,u=0,s=o.call(arguments),a=s.length,c=1!==a||t&&r.isFunction(t.promise)?a:0,l=1===c?t:r.Deferred(),f=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?o.call(arguments):i,r===e?l.notifyWith(n,r):--c||l.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);u<a;u++)s[u]&&r.isFunction(s[u].promise)?s[u].promise().done(f(u,i,s)).fail(l.reject).progress(f(u,n,e)):--c;return c||l.resolveWith(i,s),l.promise()}})},function(t,e,n){t.exports=n(12)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.dotnetifyHubFactory=void 0;var r=n(1),o=n(3),i=n(9),u=o,s=window||t||{},a=function(){function t(){}return t.create=function(){var t={version:"2.0.0",type:null,reconnectDelay:[2,5,10],reconnectRetry:null,_startInfo:null,_init:!1,requestVM:function(e,n){return t.server.request_VM(e,n)},updateVM:function(e,n){return t.server.update_VM(e,n)},disposeVM:function(e){return t.server.dispose_VM(e)},responseEvent:r.createEventEmitter(),reconnectedEvent:r.createEventEmitter(),connectedEvent:r.createEventEmitter(),connectionFailedEvent:r.createEventEmitter(),get isHubStarted(){return!!this._startInfo},startHub:function(t,e,n,r){var o=this,i=function(){"function"==typeof e&&e(),o.connectedEvent.emit()};if(null===this._startInfo||r)try{this._startInfo=this.start(t).done(i).fail(function(t){throw"function"==typeof n&&n(),o.connectionFailedEvent.emit(),t})}catch(t){this._startInfo=null}else try{this._startInfo.done(i)}catch(o){return this._startInfo=null,this.startHub(t,e,n,r)}},init:function(e,n,r){t._init||(t._init=!0,(r=r||s.signalR||i)&&r.HubConnection?(t.type="netcore",Object.defineProperty(t,"isConnected",{get:function(){return t._connection&&1===t._connection.connection.connectionState}}),t=u.extend(t,{hubPath:e||"/dotnetify",url:n,_connection:null,_reconnectCount:0,_startDoneHandler:null,_startFailHandler:null,_disconnectedHandler:function(){},_stateChangedHandler:function(t){},_onDisconnected:function(){t._changeState(4),t._disconnectedHandler()},_changeState:function(e){1==e&&(t._reconnectCount=0);t._stateChangedHandler({0:"connecting",1:"connected",2:"reconnecting",4:"disconnected",99:"terminated"}[e])},_startConnection:function(e,n){var o=t.url?t.url+t.hubPath:t.hubPath,i={};Object.keys(e).forEach(function(t){i[t]=e[t]}),i.transport=n.shift();var u=(new r.HubConnectionBuilder).withUrl(o,i);"function"==typeof i.connectionBuilder&&(u=i.connectionBuilder(u)),t._connection=u.build(),t._connection.on("response_vm",t.client.response_VM),t._connection.onclose(t._onDisconnected);var s=t._connection.start().then(function(){t._changeState(1)}).catch(function(){n.length>0?t._startConnection(e,n):t._onDisconnected()});return"function"==typeof t._startDoneHandler&&s.then(t._startDoneHandler).catch(t._startFailHandler||function(){}),s},start:function(e){t._startDoneHandler=null,t._startFailHandler=null;var n=[0],r={webSockets:0,serverSentEvents:1,longPolling:2};e&&Array.isArray(e.transport)&&(n=e.transport.map(function(t){return r[t]}));var o=t._startConnection(e,n);return{done:function(e){return t._startDoneHandler=e,o.then(e).catch(function(t){throw t}),this},fail:function(e){return t._startFailHandler=e,o.catch(e),this}}},disconnected:function(e){"function"==typeof e&&(t._disconnectedHandler=e)},stateChanged:function(e){"function"==typeof e&&(t._stateChangedHandler=e)},reconnect:function(e){if("function"==typeof e)if(!t.reconnectRetry||t._reconnectCount<t.reconnectRetry){var n=t._reconnectCount<t.reconnectDelay.length?t.reconnectDelay[t._reconnectCount]:t.reconnectDelay[t.reconnectDelay.length-1];t._reconnectCount++,setTimeout(function(){t._changeState(2),e()},1e3*n)}else t._changeState(99)},client:{},server:{dispose_VM:function(e){t._connection.invoke("Dispose_VM",e)},update_VM:function(e,n){t._connection.invoke("Update_VM",e,n)},request_VM:function(e,n){t._connection.invoke("Request_VM",e,n)}}})):(t.type="netfx",s.jQuery&&(u=s.jQuery),function(e){if("function"!=typeof e.signalR)throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var n=e.signalR;function r(t,n){return function(){n.apply(t,e.makeArray(arguments))}}function o(t,n){var o,i,u,s,a;for(o in t)if(t.hasOwnProperty(o)){if(!(i=t[o]).hubName)continue;for(u in a=n?i.on:i.off,i.client)if(i.client.hasOwnProperty(u)){if(s=i.client[u],!e.isFunction(s))continue;a.call(i,u,r(i,s))}}}e.hubConnection.prototype.createHubProxies=function(){var t={};return this.starting(function(){o(t,!0),this._registerSubscribedHubs()}).disconnected(function(){o(t,!1)}),t.dotNetifyHub=this.createHubProxy("dotNetifyHub"),t.dotNetifyHub.client={},t.dotNetifyHub.server={dispose_VM:function(n){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Dispose_VM"],e.makeArray(arguments)))},request_VM:function(n,r){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Request_VM"],e.makeArray(arguments)))},update_VM:function(n,r){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Update_VM"],e.makeArray(arguments)))}},t},n.hub=e.hubConnection(t.hubPath,{useDefaultPath:!1}),e.extend(n,n.hub.createHubProxies())}(u),Object.defineProperty(t,"state",{get:function(){return u.connection.hub.state},set:function(t){u.connection.hub.state=t}}),Object.defineProperty(t,"client",{get:function(){return u.connection.dotNetifyHub.client}}),Object.defineProperty(t,"server",{get:function(){return u.connection.dotNetifyHub.server}}),Object.defineProperty(t,"isConnected",{get:function(){return u.connection.hub.state==u.signalR.connectionState.connected}}),t=u.extend(t,{hubPath:e||"/signalr",url:n,_reconnectCount:0,_stateChangedHandler:function(t){},start:function(e){var n;return t.url&&(u.connection.hub.url=t.url),(n=e?u.connection.hub.start(e):u.connection.hub.start()).fail(function(t){t.source&&"Error parsing negotiate response."===t.source.message&&console.warn("This client may be attempting to connect to an incompatible SignalR .NET Core server.")}),n},disconnected:function(t){return u.connection.hub.disconnected(t)},stateChanged:function(e){return t._stateChangedHandler=e,u.connection.hub.stateChanged(function(n){1==n&&(t._reconnectCount=0);e({0:"connecting",1:"connected",2:"reconnecting",4:"disconnected"}[n.newState])})},reconnect:function(e){if("function"==typeof e)if(!t.reconnectRetry||t._reconnectCount<t.reconnectRetry){var n=t._reconnectCount<t.reconnectDelay.length?t.reconnectDelay[t._reconnectCount]:t.reconnectDelay[t.reconnectDelay.length-1];t._reconnectCount++,setTimeout(function(){t._stateChangedHandler("reconnecting"),e()},1e3*n)}else t._stateChangedHandler("terminated")}})),t.client.response_VM=function(e,n){Array.isArray(e)&&(n=e[1],e=e[0]),t.responseEvent.emit(e,n)||t.server.dispose_VM(e)},t.disconnected(function(){t._startInfo=null,t.reconnect(function(){t.reconnectedEvent.emit()})}))}};return t},t}();e.dotnetifyHubFactory=a,e.default=a.create()}).call(this,n(0))},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Dotnetify=void 0;var o=n(15),i=n(8),u=n(7),s=function(){function t(){this.react=null,this.vue=null,this.ko=null,this.hub=o.default,this.hubOptions={transport:["webSockets","longPolling"],connectionBuilder:function(t){return t}},this.hubPath=null,this.hubLib=null,this.debug=!1,this.debugFn=null,this.connectionStateHandler=null,this.connectHandler=null,this._vmAccessors=[]}return Object.defineProperty(t.prototype,"hubServerUrl",{get:function(){return this.hub.url},set:function(t){this.hub.url=t,this.debug&&console.log("SignalR: connecting to "+this.hubServerUrl),this.hub.isHubStarted&&this.startHub(this.hub,!0)},enumerable:!1,configurable:!0}),t.prototype.connect=function(t,e){return a.react.connect(t,{},e)},t.prototype.createHub=function(t,e,n){return this.initHub(o.dotnetifyHubFactory.create(),e,t,n)},t.prototype.createWebApiHub=function(t,e){return u.createWebApiHub(t,e)},t.prototype.initHub=function(t,e,n,r){var o=this,i=t||this.hub,u=e||this.hubPath,s=n||this.hubServerUrl,a=r||this.hubLib;return i.isHubStarted||(i.init(u,s,a),i.stateChanged(function(t){return o.handleConnectionStateChanged(t,null,i)})),i},t.prototype.selectHub=function(t){(t=t||{}).options=t.options||{};var e="function"==typeof this.connectHandler&&this.connectHandler(t)||{};return e.hub||(e.hub=i.hasLocalVM(t.vmId)?i.default:t.options.webApi?u.default:this.initHub(),e.hub.debug=this.debug),Object.assign(t,e)},t.prototype.startHub=function(t,e){var n=this,r=t||this.hub;r.startHub(this.hubOptions,function(){},function(t){return n.handleConnectionStateChanged("error",t,r)},e)},t.prototype.addVMAccessor=function(t){!this._vmAccessors.includes(t)&&this._vmAccessors.push(t)},t.prototype.getViewModels=function(){return this._vmAccessors.reduce(function(t,e){return r(t,e())},[]).filter(function(t,e,n){return n.indexOf(t)===e})},t.prototype.handleConnectionStateChanged=function(t,e,n){this.debug&&console.log("SignalR: "+(e?e.message:t)),"function"==typeof this.connectionStateHandler?this.connectionStateHandler(t,e,n):e&&console.error(e)},t.prototype.checkServerSideException=function(t,e,n){var r=JSON.parse(e);if(r&&r.hasOwnProperty("ExceptionType")&&r.hasOwnProperty("Message")){var o={name:r.ExceptionType,message:r.Message};if("function"!=typeof n)throw console.error("["+t+"] "+o.name+": "+o.message),o;n(o)}},t}();e.Dotnetify=s;var a=new s;e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=n(3),i=n(2);i.default.react.useConnect=function(t,e,n){if(null==r.useState||null==r.useEffect)throw"Error: using React hooks requires at least v16.8.";var u=e.state,s=e.props;null==u&&(u=e||{});var a=r.useState(u),c=a[0],l=a[1],f=r.useRef(),d=r.useRef(c);return r.useEffect(function(){return f.current=i.default.react.connect(t,{props:s,get state(){return d.current},setState:function(t){d.current=o.extend({},d.current,t),l(d.current)}},n),function(){return f.current.$destroy()}},[]),{vm:f.current,state:c}},e.default=function(t,e,n){return i.default.react.useConnect(t,e,n)}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),u=n(2),s=n(6),a=function(t){function e(e){var n=t.call(this,e)||this;n.initialHtml={};var r=document.getElementById(e.id);return r&&s.getSsrState(e.id)?n.initialHtml={__html:r.innerHTML}:n.initialHtml={__html:""},n}return r(e,t),e.prototype.render=function(){return i.createElement("div",o({},this.props,{dangerouslySetInnerHTML:this.initialHtml}))},e}(i.Component);e.default=a,u.default.react.router.RouteTarget=a},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=n(2),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.render=function(){var t=this.props;return o.createElement("a",{style:t.style,className:t.className,href:t.route&&t.vm?t.vm.$route(t.route):"/",children:t.children,onClick:function(e){if(e.preventDefault(),null!=t.vm)if(null!=t.route){if("function"!=typeof t.onClick||!1!==t.onClick(e))return t.vm.$handleRoute(e)}else console.error("RouteLink requires 'route' property.");else console.error("RouteLink requires 'vm' property.")}})},e}(o.Component);e.default=u,i.default.react.router.RouteLink=u},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var r=n(20);function o(){}t.exports=function(){function t(t,e,n,o,i,u){if(u!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=o,n.PropTypes=n,n}},function(t,e,n){t.exports=n(21)()},function(t,e,n){"use strict";(function(t){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),u=n(22),s=n(2),a=window||t||{},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.scoped=function(t){var e=this.context.scoped?this.context.scoped(this.props.vm):this.props.vm;return e?e+"."+t:t},e.prototype.scopedOptions=function(t){var e=this.context.scoped?this.context.scopedOptions(this.props.options):this.props.options;return e?o(o({},e),t):t},e.prototype.getChildContext=function(){var t=this;return{scoped:function(e){return t.scoped(e)},scopedOptions:function(e){return t.scopedOptions(e)},connect:function(e,n,r){return n.vmId=t.scoped(e),n.options=t.scopedOptions(r),n.vm=s.default.react.connect(n.vmId,n,n.options),n.dispatch=function(t){return n.vm.$dispatch(t)},n.dispatchState=function(t){n.vm.State(t),n.vm.$dispatch(t)},a.vmStates?a.vmStates[n.vmId]:null}}},e.prototype.render=function(){return this.props.children},e.displayName="Scope",e.version="1.3.0",e.contextTypes={scoped:u.func,scopedOptions:u.func},e.childContextTypes={scoped:u.func.isRequired,scopedOptions:u.func.isRequired,connect:u.func.isRequired},e}(i.Component);e.default=c,s.default.react.Scope=c}).call(this,n(0))},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,s=i.length;u<s;u++,o++)r[o]=i[u];return r};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(3),u=function(){function t(t,e){this.routes=[],this.vm=t,this.router=e,this.debug=t.$dotnetify.controller.debug,t.$options&&t.$options.onRouteEnter&&(t.onRouteEnter=t.$options.onRouteEnter)}return Object.defineProperty(t.prototype,"RoutingState",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VMRoot",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VMArg",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),t.prototype.dispatchActiveRoutingState=function(t){this.vm.$dispatch({"RoutingState.Active":t});var e=this.vm.State().RoutingState;e=Object.assign(e||{},{Active:t}),this.vm.State({RoutingState:e})},t.prototype.handleRoute=function(t){var e=this,n=null;if("object"==typeof t?(t.preventDefault(),n=t.currentTarget.pathname):"string"==typeof t&&(n=t),null==n||""==n)throw new Error("$handleRoute requires path argument or event with pathname.");setTimeout(function(){return e.router.pushState({},"",n)})},t.prototype.initRoot=function(){if(this.hasRoutingState&&null!==this.RoutingState&&null!==this.RoutingState.Root&&this._absRoot!=this.RoutingState.Root){var t=o.default.trim(this.VMRoot);""!=t&&(t="/"+t);var e=o.default.trim(this.RoutingState.Root);this._absRoot=""!=e?t+"/"+e:t,this.RoutingState.Root=this._absRoot}},t.prototype.initRouting=function(){var t=this,e=this.vm;if(this.hasRoutingState)if(null!==this.RoutingState){var n=this.RoutingState.Templates;if(null!=n&&0!=n.length){this.router._init||(this.router.init(),this.router._init=!0),this.initRoot(),n.forEach(function(e){var n=null!=e.UrlPattern?e.UrlPattern:e.Id;n=""!=n?n:"/";var r=t.toUrl(n);t.debug&&console.log("router> map "+r+" to template id="+e.Id),t.router.mapTo(r,function(r){t.router.urlPath="";var o=n;for(var i in r)o=o.replace(":"+i,r[i]);o=o.replace(/\(\/:([^)]+)\)/g,"").replace(/\(|\)/g,""),t.routeTo(o,e)})});var r=this.toUrl(this.RoutingState.Active);""==this.router.urlPath&&(this.router.urlPath=r),this.routeUrl()||this.raiseRoutedEvent(!0)}}else console.error("router> the RoutingState prop of '"+e.$vmId+"' was not initialized.");else this.router.urlPath&&this.raiseRoutedEvent(!0)},t.prototype.isActive=function(t){return!(null==t||!t.hasOwnProperty("Path"))&&o.default.equal(t.Path,this.RoutingState.Active)},t.prototype.loadHtmlView=function(t,e,n,r){var o=this.vm;this.unmountView(t),i(t).load(e,null,function(){if(null!=n){var t=n.split(",").map(function(t){return i.getScript(t)});i.when.apply(i,t).done(function(){return"function"==typeof r&&r.call(o)})}else"function"==typeof r&&r.call(o)})},t.prototype.loadHtmlElementView=function(t,e,n,r,o){var u=this,s=this.vm,a=function(){u.unmountView(t);for(var n=document.querySelector(t);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(e),"function"==typeof o&&o.call(s)};if(null==n)a();else{var c=n.split(",").map(function(t){return i.getScript(t)});i.when.apply(i,c).done(a)}},t.prototype.loadView=function(t,e,n,r,o){throw new Error("Not implemented")},t.prototype.manualRouteTo=function(t,e,n,r){this.vm;var o={Id:"manual",UrlPattern:null,Target:e,ViewUrl:n,JSModuleUrl:r};this.routeTo(t,o,!0)},t.prototype.onRouteEnter=function(t,e){return!0},t.prototype.raiseRoutedEvent=function(t){var e=this;if(this.RoutingState&&this.RoutingState.Templates){if(t){var n=this.RoutingState.Templates.find(function(t){return"*"===t.UrlPattern});n?this.routeTo(this.router.urlPath,n):this.router.notFound404Url&&setTimeout(function(){return window.location.href=e.router.notFound404Url})}this.debug&&console.log("router> routed"+(t?" (404)":""))}this.router.routedEvent.emit()},t.prototype.route=function(t,e){if(null!=t){if(!t.hasOwnProperty("Path")&&!t.hasOwnProperty("TemplateId"))throw new Error("Not a valid route");this.initRoot();var n=t.Path,r=null;if(this.hasRoutingState&&null!=this.RoutingState.Templates&&null!=t.TemplateId){var o=this.RoutingState.Templates.filter(function(e){return e.Id==t.TemplateId});if(o.length>0)r=o[0],"string"==typeof e&&(r.Target=e),null==n&&(n=null!=r.UrlPattern?r.UrlPattern:r.Id,t.Path=n);else if(null==t.RedirectRoot)throw new Error("vmRoute cannot find route template "+t.TemplateId)}if(null!=t.RedirectRoot){var i=t.RedirectRoot;"/"==i.charAt(0)&&(i=i.substr(0,i.length-1));var u=t.RedirectRoot.split("/"),s="",a=this.VMRoot;if(null!=a)for(var c=a.split("/"),l=0;l<c.length&&(""==c[l]||c[l]!=u[0]);l++)s+=c[l]+"/";return s=(s+=i+"/"+n).replace(/\/\/+/g,"/"),this.routes.some(function(t){return t.Path===n})||this.routes.push({TemplateId:null,Path:n,Url:s}),s}if(null==r)throw new Error("vmRoute cannot find any route template");t.$template=r,this.pathToRoute=this.pathToRoute||{},this.pathToRoute[n]=t;var f=this.toUrl(n);return f=f.length>0?f:"/",this.routes.some(function(t){return t.Path===n})||this.routes.push({TemplateId:null,Path:n,Url:f}),f}},t.prototype.routeTo=function(t,e,n,i,u){var s=this,a=this.vm,c=a.$dotnetify.getViewModels();this.debug&&console.log("router> route '"+t+"' to template id="+e.Id);for(var l=this.toUrl(t),f=0;f<c.length;f++){var d=c[f].$router.VMArg;if(null!=d&&"string"==typeof d["RoutingState.Origin"]&&o.default.equal(d["RoutingState.Origin"],l))return}var p=function(){if(null!=e.Target)return null==document.getElementById(e.Target)?!0===u?void(s.debug&&console.log("router> target '"+e.Target+"' not found in DOM")):(s.debug&&console.log("router> target '"+e.Target+"' not found in DOM, use redirect instead"),s.router.redirect(s.toUrl(t),r(c,a.$dotnetify.controller.getViewModels()))):void s.loadView("#"+e.Target,e.ViewUrl,e.JSModuleUrl,{"RoutingState.Origin":t},function(){s.dispatchActiveRoutingState(t),1!=n&&a.hasOwnProperty("onRouteExit")&&a.onRouteExit(t,e),"function"==typeof i&&i.call(a)});console.error("router> the Target for template '"+e.Id+"' was not set.  Use vm.onRouteEnter() to set the target.")};if(1!=n&&a.hasOwnProperty("onRouteEnter")){if(!1===this.onRouteEnter(t,e))return;var h=a.onRouteEnter(t,e);if(!1===h)return;if(h&&"function"==typeof h.then)return void h.then(function(t){return!1!==t&&p()})}p()},t.prototype.routeToRoute=function(t){var e=this,n=this.vm.$route(t);if(null==n||""==n)throw new Error("The route passed to $routeTo is invalid.");setTimeout(function(){return e.router.pushState({},"",n)})},t.prototype.routeUrl=function(t){var e=this;if(!this.hasRoutingState)return!1;var n=!!t,r=this.RoutingState.Root;if(null==r)return!1;var i=n?t:this.router.urlPath;if(this.debug&&console.log("router> routing "+i),o.default.equal(i,r)||o.default.equal(i,r+"/")||"/"===i)return(u=o.default.grep(this.RoutingState.Templates,function(t){return""===t.UrlPattern})).length>0&&(this.routeTo("",u[0],null,null,n),this.router.urlPath="",this.raiseRoutedEvent(),!0);if(r+="/",o.default.startsWith(i,r)){var u,s=null;if((u=o.default.grep(this.routes,function(t){return o.default.startsWith(i+"/",t.Url+"/")})).length>0)for(var a=0;a<u.length;a++)(null==s||s.Url.length<u[a].Url.length)&&(s=u[a]);if(null!=s){var c=s.Path,l=this.hasOwnProperty("pathToRoute")&&this.pathToRoute.hasOwnProperty(c)?this.pathToRoute[c].$template:null;if(null!=l)return o.default.equal(this.router.urlPath,this.toUrl(c))&&(this.router.urlPath=""),o.default.equal(this.RoutingState.Active,c)?this.raiseRoutedEvent():this.routeTo(c,l,!1,function(){return e.raiseRoutedEvent()},n),!0}else if(this.router.match(i))return this.router.urlPath="",this.raiseRoutedEvent(),!0}return!1},t.prototype.toUrl=function(t){var e=o.default.trim(t);return"("!=e.charAt(0)&&""!=e&&(e="/"+e),this.hasRoutingState?this.RoutingState.Root+e:t},t.prototype.unmountView=function(t){throw new Error("Not implemented")},t}();e.default=u},function(t,e){t.exports=n},function(t,e,n){"use strict";(function(t){var r=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=n(25),u=n(24),s=n(3),a=n(1),c=window||t||{},l=function(t){function e(e,n){return t.call(this,e,n)||this}return r(e,t),Object.defineProperty(e.prototype,"hasRoutingState",{get:function(){var t=this.vm.State();return t&&t.hasOwnProperty("RoutingState")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RoutingState",{get:function(){return this.vm.State().RoutingState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VMRoot",{get:function(){return this.vm.Props("vmRoot")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VMArg",{get:function(){return this.vm.Props("vmArg")},enumerable:!1,configurable:!0}),e.prototype.onRouteEnter=function(t,e){return e.ViewUrl||(e.ViewUrl=e.Id),!0},e.prototype.loadView=function(t,e,n,r,o){var i,u=this.vm;if(this.hasRoutingState){if(null===this.RoutingState)return void console.error("router> the RoutingState prop of '"+u.$vmId+"' was not initialized.");var s=this.VMRoot;i={vmRoot:s=null!=s?"/"+a.default.trim(this.RoutingState.Root)+"/"+a.default.trim(s):this.RoutingState.Root,vmArg:r}}if(e=this.router.overrideUrl(e,t),n=this.router.overrideUrl(n,t),a.default.endsWith(e,"html"))this.loadHtmlView(t,e,n,o);else{var l=e;"string"==typeof e&&c.hasOwnProperty(e)&&(l=c[e]),l instanceof HTMLElement?this.loadHtmlElementView(t,l,n,i,o):this.loadReactView(t,l,n,i,o)}},e.prototype.loadReactView=function(t,e,n,r,u){var a=this;return new Promise(function(c,l){var f=a.vm,d=a.vm?a.vm.$vmId:"",p=function(){var n=null;try{n=o.createElement(e,r)}catch(t){return console.error("["+d+"] failed to load view '"+e+"' because it's not a valid React element."),void l()}a.unmountView(t);try{var s=[n,document.querySelector(t)];!0===f.$dotnetify.ssrEnabled?i.hydrate.apply(i,s):i.render.apply(i,s)}catch(t){console.error(t)}"function"==typeof u&&u.call(f,n),c(n)};if(null==n||!0===a.vm.$dotnetify.ssr)p();else{var h=n.split(",").map(function(t){return s.getScript(t)});s.when.apply(s,h).done(p)}})},e.prototype.unmountView=function(t){try{i.unmountComponentAtNode(document.querySelector(t))}catch(t){console.warn(t)}},e}(u.default);e.default=l}).call(this,n(0))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=n||t||{},r={version:"0.8.5",map:function(t){return r.routes.defined.hasOwnProperty(t)?r.routes.defined[t]:new r.core.route(t)},root:function(t){r.routes.root=t},rescue:function(t){r.routes.rescue=t},history:{initial:{},pushState:function(t,e,o){r.history.supported?r.dispatch(o)&&history.pushState(t,e,o):r.history.fallback&&(n.location.hash="#"+o)},popState:function(t){var e=!r.history.initial.popped&&location.href==r.history.initial.URL;r.history.initial.popped=!0,e||r.dispatch("/"===document.location.pathname?"":document.location.pathname)},listen:function(t){if(r.history.supported=!(!n.history||!n.history.pushState),r.history.fallback=t,r.history.supported)r.history.initial.popped="state"in n.history,r.history.initial.URL=location.href,n.onpopstate=r.history.popState;else if(r.history.fallback){for(route in r.routes.defined)"#"!=route.charAt(0)&&(r.routes.defined["#"+route]=r.routes.defined[route],r.routes.defined["#"+route].path="#"+route);r.listen()}}},match:function(t,e){""===t&&(t="/");var n,o,i,u,s,a,c={},l=null;for(l in r.routes.defined)if(null!==l&&void 0!==l)for(n=(l=r.routes.defined[l]).partition(),u=0;u<n.length;u++){if(s=t,(o=n[u]).search(/:/)>0)for(i=0;i<o.split("/").length;i++)i<s.split("/").length&&":"===o.split("/")[i].charAt(0)&&(c[o.split("/")[i].replace(/:/,"")]=s.split("/")[i],(a=s.split("/"))[i]=o.split("/")[i],s=a.join("/"));if(o===s)return e&&(l.params=c),l}return null},dispatch:function(t){var e,n;if(r.routes.current!==t){if(r.routes.previous=r.routes.current,r.routes.current=t,n=r.match(t,!0),r.routes.previous&&null!==(e=r.match(r.routes.previous))&&null!==e.do_exit&&e.do_exit(),null!==n)return n.run(),!0;null!==r.routes.rescue&&r.routes.rescue()}},listen:function(){var t=function(){r.dispatch(location.hash)};""===location.hash&&null!==r.routes.root&&(location.hash=r.routes.root),"onhashchange"in n&&(!document.documentMode||document.documentMode>=8)?n.onhashchange=t:setInterval(t,50),""!==location.hash&&r.dispatch(location.hash)},core:{route:function(t){this.path=t,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},r.routes.defined[t]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};r.core.route.prototype={to:function(t){return this.action=t,this},enter:function(t){return t instanceof Array?this.do_enter=this.do_enter.concat(t):this.do_enter.push(t),this},exit:function(t){return this.do_exit=t,this},partition:function(){for(var t,e,n=[],r=[],o=/\(([^}]+?)\)/g;t=o.exec(this.path);)n.push(t[1]);for(r.push(this.path.split("(")[0]),e=0;e<n.length;e++)r.push(r[r.length-1]+n[e]);return r},run:function(){var t,e=!1;if(r.routes.defined[this.path].hasOwnProperty("do_enter")&&r.routes.defined[this.path].do_enter.length>0)for(t=0;t<r.routes.defined[this.path].do_enter.length;t++)if(!1===r.routes.defined[this.path].do_enter[t].apply(this,null)){e=!0;break}e||r.routes.defined[this.path].action()}},e.default=r}).call(this,n(0))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),o=n(1),i=function(){function t(t){this.version="3.0.0",this.debug=!1,this.notFound404Url="/404.html",this._init=!1,this.routedEvent=o.createEventEmitter(),this.debug=t}return Object.defineProperty(t.prototype,"urlPath",{get:function(){return t._urlPath},set:function(e){t._urlPath=e},enumerable:!1,configurable:!0}),t.prototype.init=function(){if(void 0===r.default)throw new Error("Pathjs library is required for routing.");r.default.history.listen(!0),r.default.routes.rescue=function(){}},t.prototype.mapTo=function(t,e){t=t.length>0?t:"/",void 0!==r.default&&r.default.map(t).to(function(){e(this.params)})},t.prototype.match=function(t){if(void 0!==r.default){var e=r.default.match(t,!0);if(null!=e)return e.run(),!0}return!1},t.prototype.overrideUrl=function(t,e){return t},t.prototype.pushState=function(t,e,n){this.urlPath="",void 0!==r.default&&r.default.history.pushState(t,e,n)},t.prototype.redirect=function(t,e){this.urlPath=t;for(var n=0;n<e.length;n++){if(e[n].$router.routeUrl(t))return void(this.debug&&console.log("router> redirected"))}location.replace(t)},t.prototype.$ready=function(){this.$router.initRouting()},t.prototype.$update=function(t){t&&t.RoutingState&&this.$router.initRouting()},t._urlPath=document.location.pathname,t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(28),i=n(26);r.default.react.router=new o.default(r.default.debug),r.default.react.router.$inject=function(t){var e=new i.default(t,r.default.react.router),n=t;n.$router=e,n.$handleRoute=function(t){return e.handleRoute(t)},n.$route=function(t,n){return e.route(t,n)},n.$routeTo=function(t){return e.routeToRoute(t)}},r.default.react.router.$mount=function(t,e,n,r){return i.default.prototype.loadReactView(t,e,null,n,r)},r.default.react.plugins.router=r.default.react.router},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);n(29);var o=n(6),i=n(23),u=n(19),s=n(18),a=n(17);t.exports=Object.assign(r.default,{Scope:i.default,RouteLink:u.default,RouteTarget:s.default,enableSsr:o.default,useConnect:a.default})}])});